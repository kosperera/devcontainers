{
    "name": ".NET Azure Functions (Isolated)",
	"image": "mcr.microsoft.com/azure-functions/dotnet-isolated:4-dotnet-isolated6.0-core-tools",

    "workspaceMount": "src=${localWorkspaceFolder},dst=/workspace,type=bind,consistency=cached",
    "workspaceFolder": "/workspace",
	
	"containerEnv":{
		"ASPNETCORE_URLS": "https://+:5001;http://+:5000",
      	"ASPNETCORE_ENVIRONMENT": "Development",
      	"DOTNET_CLI_TELEMETRY_OPTOUT": 1,
      	"DOTNET_NOLOGO": 1,
	},

	"features": {
		"common": {
			"username": "automatic",
			"uid": "automatic",
			"gid": "automatic",
			"installZsh": true,
			"upgradePackages": true,
		},
		"github-cli": "latest",
	},

    "forwardPorts": [7071],

    // Set *default* container specific settings.json values on container create.
    "settings": {
		"files.associations": {
			"**/ci/*.yml": "azure-pipelines"
		},
        
        "azurite.debug": true,

        "azureFunctions.projectLanguage": "C#",
        "azureFunctions.projectRuntime": "~4",
        "debug.internalConsoleOptions": "neverOpen",
        "azureFunctions.preDeployTask": "publish",

		"omnisharp.enableAsyncCompletion": true,
		"omnisharp.enableImportCompletion": true,
		"omnisharp.enableRoslynAnalyzers": true,
    	"omnisharp.organizeImportsOnFormat": true,
		"omnisharp.useEditorFormattingSettings": true,

		// Fix for ARM-based devices.
		// Read more https://github.com/OmniSharp/omnisharp-vscode/issues/4348#issuecomment-1003867594
		"omnisharp.useModernNet": true,

		"razor.disabled": true,

		"terminal.integrated.defaultProfile.linux": "zsh",
    },

    // Add the IDs of extensions you want installed when the container is created.
    "extensions": [
		"visualstudioexptteam.vscodeintellicode",
		"visualstudiotxptteam.vscodeintellicode-completions",
		"ms-dotnettools.csharp",
		"ms-dotnettools.vscode-dotnet-runtime",
		"ms-edgedevtools.vscode-edge-devtools",
		
		"humao.rest-client",
		
		"ms-vscode.azurecli",
		"ms-azuretools.vscode-azureappservice",
		"ms-azuretools.vscode-azureserverlesspack",

        "ms-azuretools.vscode-azurestorage",
        "azurite.azurite",
		
        "ms-azuretools.vscode-azureresourcegroups",
		"ms-azuretools.vscode-azurevirtualmachines",
        "bencoleman.armview",

		"ms-azure-devops.azure-pipelines",
        "ms-mssql.sql-database-projects-vscode",
		
        "ms-dotnettools.dotnet-interactive-vscode",

		"ms-vscode.wordcount",
		"editorconfig.editorconfig",
		"esbenp.prettier-vscode",
		"streetsidesoftware.code-spell-checker",
		"redhat.fabric8-analytics",
		"redhat.vscode-yaml",
		"bierner.github-markdown-preview",
    ],

    // Use 'postCreateCommand' to run commands after the container is created.
	"postCreateCommand": "zsh .devcontainer/post-create.zsh",

    // Comment out connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
    "remoteUser": "vscode",
    // Uncomment to indicates whether VS Code should stop the containers when the VS Code window is closed / shut down. Values are "none" and "stopCompose" (default).
    "shutdownAction": "stopCompose"
}
